<template>
  <require from="./characteristicsTable"></require>
  <require from="./skillsTable"></require>
  <div class="container" show.bind="character.Skills.length > 0">
    <div class="row">
      <div class="col-sm">
        <h1>Character Builder</h1>
      </div>
      <div class="col-sm">
        <!-- <input type="button" class="btn btn-primary" click.delegate="createCharacter()" value="Create Character" /> -->
        <!-- <input type="button" class="btn btn-danger" click.delegate="openSelectSpecies()" value="Test Select Species Dialog" /> -->
      </div>
      <div class="col-sm">
        <a href="https://github.com/psychoza/WFRP_4e_CB"><img src="src/resources/images/GitHub-Mark-64px.png"
            alt="WFRP_4e_CB GitHub repository"></a>
      </div>
    </div>
    <hr>
    <div class="row">
      <div class="col-sm">
        <span>Name:</span> <input type="text" value.bind="character.Name" />
      </div>
      <div class="col-sm">
        <span>Species:</span> ${character.Species.Description} (${character.SpeciesRoll})
      </div>
      <div class="col-sm">
        <span>Class:</span> ${character.Class.Description} ${character.CareerRoll}
      </div>
    </div>
    <div class="row">
      <div class="col-sm">
        <span>Career:</span> ${character.Career.Description}
      </div>
      <div class="col-sm">
        <span>Career Level:</span> ${character.Career.Level}
      </div>
    </div>
    <div class="row">
      <div class="col-sm">
        <span>Career Path:</span> ${character.Career.CareerPath}
      </div>
      <div class="col-sm">
        <span>Status:</span> ${character.Career.Status}
      </div>
    </div>
    <div class="row">
      <div class="col-sm">
        <span>Age:</span> <input type="text" />
      </div>
      <div class="col-sm">
        <span>Height:</span> <input type="text" />
      </div>
      <div class="col-sm">
        <span>Hair:</span> <input type="text" />
      </div>
      <div class="col-sm">
        <span>Eyes:</span> <input type="text" />
      </div>
    </div>
    <hr>
    <div class="row">
      <div class="col-sm">
        <characteristics-table characteristics.bind="character.Characteristics"></characteristics-table>
      </div>
      <div class="col-sm">
        <div class="row">
          <div class="col-sm">
            <h6>Fate</h6>
            <table class="table table-bordered table-hover table-sm">
              <tbody>
                <tr>
                  <td>Fate</td>
                  <td>${character.Fate}</td>
                </tr>
                <tr>
                  <td>Fortune</td>
                  <td>${character.Fortune}</td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="col-sm">
            <h6>Resilience</h6>
            <table class="table table-bordered table-hover table-sm">
              <tbody>
                <tr>
                  <td>Resilience</td>
                  <td>Resolve</td>
                  <td>Motivation</td>
                </tr>
                <tr>
                  <td>${character.Resilience}</td>
                  <td>${character.Resolve}</td>
                  <td></td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="col-sm">
            <h6>Experience</h6>
            <table class="table table-bordered table-hover table-sm">
              <tbody>
                <tr>
                  <td>Current</td>
                  <td>Spent</td>
                  <td>Total</td>
                </tr>
                <tr>
                  <td>${character.CurrentExperience}</td>
                  <td>${character.SpentExperience}</td>
                  <td>${character.Experience}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <hr>
        <div class="row">
          <div class="col-sm">
            <h6>Movement</h6>
            <table class="table table-bordered table-hover table-sm">
              <tbody>
                <tr>
                  <td>Movement</td>
                  <td>${character.Movement}</td>
                  <td>Walk</td>
                  <td>${character.Movement * 2}</td>
                  <td>Run</td>
                  <td>${character.Movement * 4}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    <hr>
    <div class="row">      
      <div class="col-sm-4" repeat.for="a of getCeilingValue(character.Skills.length/numberOfSkillsPerColumn)">
        <h6>Skills</h6>
        <table class="table table-bordered table-hover table-sm">
          <thead>
            <tr>
              <th scope="col">
                Name
              </th>
              <th colspan="2" scope="col">
                Characteristic
              </th>
              <th scope="col">
                Adv
              </th>
              <th scope="col">
                Skill
              </th>
            </tr>
          </thead>
          <tbody>
            <tr
              repeat.for="skill of character.Skills.slice($index*numberOfSkillsPerColumn,$index*numberOfSkillsPerColumn+numberOfSkillsPerColumn)">
              <td class="text-nowrap">${skill.Description}</td>
              <td>${skill.CharacteristicType}</td>
              <td>${character.getCharacteristicScore(skill.CharacteristicType)}</td>
              <td>${skill.Advances}</td>
              <td>${character.getSkillLevel(skill)}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</template>
